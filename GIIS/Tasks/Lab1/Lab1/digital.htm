<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/index.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Фильтрация изображения, улучшение контраста</title>
<!-- InstanceEndEditable -->
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<link href="../STYLE.CSS" rel="stylesheet" type="text/css">
</head>

<body>
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="2">
  <tr valign="top"> 
    <td width="10" height="5">&nbsp;</td>
    <!-- InstanceBeginEditable name="header" -->
    <td>&nbsp;</td>
    <!-- InstanceEndEditable --></tr>
  <tr valign="top"> 
    <td>&nbsp;</td>
    <!-- InstanceBeginEditable name="text" --> 
    <td><table width="100%" border="0" cellspacing="2" cellpadding="4">
        <tr> 
          <td class="box"><h2><b>Фильтрация изображения, улучшение контраста</b></h2>
            <blockquote> 
              <div align="left">
                <p><b>Фильтрация изображений</b> </p>
              </div>
              <p class=MsoPlainText style="MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: center" 
align=center><b></b></p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Реальные изображения 
                наряду с полезной информацией содержат различные помехи. Источниками 
                помех являются собственные шумы фотоприемных устройств, зернистость 
                фотоматериалов, шумы каналов связи. Наконец, возможны геометрические 
                искажения, изображение может быть расфокусировано. Пусть <i>f 
                </i>(<i>x,y</i>) – некоторое изображение, <i>х</i>, <i>у</i> – 
                координаты.Реальное растровое изображение имеет конечные размеры: 
                <i>A</i>  <i>x</i>  <i>B</i>, <i>C</i>  <i>y </i> <i>D</i> 
                и состоит из отдельных пикселов, расположенных с некоторым шагом 
                в узлах прямоугольной сетки. Линейное преобразование изображения 
                можно описать выражением</p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 127.6pt; MARGIN-RIGHT: -0.9pt"><sub><img height=30 
src="images/image012.gif" 
width=254></sub> (2)</p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: center" 
align=center>&nbsp;</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Выражение 
                (2), где интегрирование ведется по всей области определения <i>x</i>&nbsp;и 
                <i>y</i>, характеризует преобразование всего изображения целиком 
                - <i>глобальную фильтрацию</i>. Ядро преобразования <i>h<sub>1 
                </sub></i>(<i>x,y,x</i>'<i>,y</i>')в оптике именуют функцией рассеяния 
                точки (ФРТ). Это изображение точечного источника на выходе оптической 
                системы, которое уже является не точкой, а некоторым пятном. В 
                соответствии с (2), все точки изображения <i>f </i>(<i>x</i>'<i>,y</i>') 
                превращаются в пятна, происходит суммирование (интегрирование) 
                всех пятен. Не следует думать, что эта процедура обязательно приводит 
                к расфокусировке изображения, наоборот, можно подобрать такую 
                ФРТ, которая позволит сфокусировать расфокусированное изображение. 
              </p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">На рис. 5 
                представлена одна из возможных ФРТ. Вообще говоря, ФРТ определена 
                на ( - &#8734; &lt; <i>x</i> &lt; &#8734;), ( - &#8734; &lt; <i>y</i> 
                &lt; &#8734;). ФРТ не должна изменяться при изменении начала отсчета 
                по <i>x</i> и <i>y</i>, для этого она должна иметь вид: <i>h<sub>1</sub></i>(<i>x,y,x',y'</i>)<i>= 
                </i>=<i>h<sub>1</sub></i>(<i>x</i><i> -</i><i>x', y</i><i> -</i><i>y'</i>). 
                Кроме того, ФРТ должна обладать осевой симметрией. В этом случае 
                все точки изображения "расплываются" одинаковым образом, равномерно 
                во все стороны (принцип <i>пространственной инвариантности</i>).</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify"> 
              <table cellspacing=0 cellpadding=0 align=left>
                <tbody>
                  <tr> 
                    <td width=5 height=0></td>
                  </tr>
                  <tr> 
                    <td></td>
                    <td><img height=175 
      alt="Подпись:  &#13;&#10;&#13;&#10;&#13;&#10;Рис. 5. Пример функции рассеяния точки&#13;&#10;" 
      src="images/image014.gif" 
  width=616></td>
                  </tr>
                </tbody>
              </table>
              <br clear=all>
              &nbsp; 
              <p></p>
              <br 
clear=all>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">На практике 
                глобальная фильтрация применяется редко. Чаще используют локальную 
                фильтрацию, когда интегрирование и усреднение проводится не по 
                всей области определения <i>x</i>&nbsp;и <i>y</i>, а по сравнительно 
                небольшой окрестности каждой точки изображения. Функция рассеяния 
                точки при этом имеет ограниченные размеры. Достоинством такого 
                подхода является хорошее быстродействие. Линейное преобразование 
                принимает вид:</p>
              <p class=MsoPlainText style="TEXT-INDENT: 6cm; MARGIN-RIGHT: 2.15pt"><sub><img height=38 
src="images/image016.gif" 
width=126></sub> (3)</p>
              <p class=MsoPlainText style="TEXT-INDENT: 35.45pt; MARGIN-RIGHT: 12.3pt">При 
                обработке растровых изображений, которые состоят из отдельных 
                пикселов, интегрирование заменено суммированием. Проще всего реализовать 
                ФРТ конечных размеров в виде прямоугольной матрицы форматом <i>N</i> 
                &acute;<i>N</i>. <i>N </i>может быть равным 3, 5, 7 и т.д. Например, 
                при <i>N </i>= 3</p>
              <p class=MsoNormal style="TEXT-ALIGN: center" align=center><sub> 
                <img height=74 
src="images/image018.gif" 
width=186></sub></p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Суммирование 
                ведется по окрестности D точки (<i>i</i>,&nbsp;<i>j</i>); <i>a</i><sub>kl</sub> 
                - значения ФРТ в этой окрестности. Яркости пикселов <i>f&nbsp;</i> 
                в этой точке и в её окрестности умножаются на коэффициенты <i>a</i><sub>kl</sub>, 
                преобразованная яркость (<i>i,j</i>)&nbsp; -го пиксела есть сумма 
                этих произведений. Элементы матрицы удовлетворяют условию пространственной 
                инвариантности, поэтому <i>a</i><sub>11</sub><i>=</i> <i>a</i><sub>13 
                </sub>=<i>a</i><sub>31</sub><i>=</i> <i>a</i><sub>33</sub>, <i>a</i><sub>12</sub> 
                = <i>a</i><sub>21</sub><i>=</i> <i>a</i><sub>23</sub> = <i>a</i><sub>32</sub>. 
                Только три элемента матрицы размером 3х3 независимы, в этом случае 
                матрица инвариантна относительно поворотов, кратных 90&#730;. 
                Опыт обработки изображений показывает, что отсутствие более строгой 
                осевой симметрии ФРТ слабо сказывается на результатах. Иногда 
                используют 8 -угольные матрицы, инвариантные относительно поворотов 
                на 45&#730;. </p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Фильтрация 
                согласно (3) осуществляется перемещением слева направо (или сверху 
                вниз) маски на один пиксел. При каждом положении апертуры производятся 
                упомянутые выше операции, а именно перемножение весовых множителей 
                <i>a</i><sub>kl </sub>с соответствующими значениями яркостей исходного 
                изображения и суммированием произведений. Полученное значение 
                присваивается центральному (<i>i,j</i>)&nbsp; -му пикселу. Обычно 
                это значение делится на заранее заданное число K (нормирующий 
                множитель). Маска содержит нечетное число строк и столбцов <i>N</i>, 
                чтобы центральный элемент определялся однозначно.</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt"> Рассмотрим некоторые 
                фильтры, сглаживающие шум. Пусть маска размером 3х3 имеет вид:</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: center" 
align=center><sub><img height=74 
src="images/image020.gif" 
width=150></sub></p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Тогда яркость 
                &nbsp;(<i>i,j</i>)&nbsp;-го пиксела после фильтрации определится 
                как</p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify"><sub><img height=26 
src="images/image022.gif" 
width=572></sub></p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: justify">Хотя коэффициенты 
                &nbsp;<i>a</i><sub>kl</sub>&nbsp; можно выбрать из среднеквадратического 
                или иного условия близости не искаженного шумом &nbsp;<i>s</i><sub>i,j</sub> 
                и преобразованного <i>g</i><sub>i,j </sub> изображений, обычно 
                их задают эвристически. Приведем еще некоторые матрицы шумоподавляющих 
                фильтров:</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: center" 
align=center><sub><img height=74 
src="images/image024.gif" 
width=526></sub></p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">У 
                фильтров <i>H<sub>1</sub> </i> -<i> H<sub>4</sub></i>&nbsp; нормирующие 
                множители K подобраны таким образом, чтобы не происходило изменения 
                средней яркости обработанного изображения. Наряду с масками 3х3 
                используются маски большей размерности, например, 5х5, 7х7 и т.п. 
                В отличие от фильтра&nbsp;<i>H<sub>2</sub></i>, у фильтров <i>H<sub>1</sub></i>, 
                <i>H<sub>3</sub></i>, <i>H<sub>4</sub></i>&nbsp; весовые коэффициенты 
                на пересечении главных диагоналей матрицы больше, чем коэффициенты, 
                стоящие на периферии. Фильтры <i>H<sub>1</sub></i>, <i>H<sub>3</sub></i>, 
                <i>H<sub>4</sub></i>&nbsp;дают более плавное изменение яркости 
                по изображению, чем <i>H<sub>2</sub></i>.</p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Пусть отсчеты 
                полезного изображения <i>f</i><sub>k,m </sub>мало меняются в пределах 
                маски. На изображение накладывается аддитивный шум: <i>f</i><sub>k,m 
                </sub>+ <i>n</i><sub>k,m </sub>, отсчеты шума <i>n</i><sub>k,m</sub>&nbsp;случайны 
                и независимы (или слабо зависимы) со статистической точки зрения. 
                В этом случае механизм подавления шума с использованием приведенных 
                фильтров состоит в том, при суммировании шумы компенсируют друг 
                друга. Эта компенсация будет происходить тем успешнее, чем большее 
                число членов в сумме, т.е. чем больше размер (апертура) маски. 
                Пусть, например, используется маска <i>N</i> &acute;<i>N</i>, 
                в пределах её полезное изображение имеет постоянную яркость<i> 
                f</i>, шум с независимыми значениями отсчетов <i>n</i><sub>k,m</sub>, 
                средним значением <i>&#956;</i> = 0 и дисперсией <i>&#963;<sup>2</sup></i> 
                в пределах маски (такой шум называют <i>белым</i>). Отношение 
                квадрата яркости (<i>i,j</i>)-го пиксела к дисперсии шума, т.е. 
                отношение сигнал/шум, равно <i>f<sup> 2</sup>/&#963;<sup>2</sup></i>.</p>
              <p class=MsoPlainText style="TEXT-INDENT: 1cm; MARGIN-RIGHT: 12.3pt">Рассмотрим, 
                например, маску типа <i>H<sub>2</sub></i>:</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: center" 
align=center><sub><img height=54 
src="images/image026.gif" 
width=330></sub></p>
              <p class=MsoPlainText style="MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: justify">Средний 
                квадрат яркости равен <i>f </i><sup>2</sup>, средний квадрат интенсивности 
                шума</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: center" 
align=center><sub><img height=56 
src="images/image028.gif" 
width=410></sub></p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Двойная 
                сумма отвечает <i>k</i>= <i>p</i>, <i>m </i>= <i>q</i>, эта сумма 
                равна &nbsp;&#963;<sup>2</sup>/<i>N </i><sup>2</sup>.Четы­рехкратная 
                сумма равна нулю, так как отсчеты шума при <i>k</i>&nbsp;&#8800; 
                <i>p</i>, <i>m</i>&nbsp;&#8800; <i>q </i>независимы: &lt;n&nbsp;<sub>k,m</sub>n&nbsp;<sub>p,q</sub>&gt; 
                = 0. В результате фильтрации отношение сигнал/шум становится равным 
                <i>N</i> <sup>2</sup><i>f</i> <sup>2</sup>/&#963;<sup>2</sup>, 
                т.е. возрастает пропорционально площади маски. Отношение яркости 
                <i>(i,j)</i>-го пиксела полезного изображения к среднеквадратическому 
                отклонению шума возрастает пропорционально <i>N</i>. Применение 
                маски 3х3, в среднем, повышает отношение сигнала к шуму в 9 раз. 
              </p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">При импульсной 
                помехе механизм подавления состоит в том, что импульс "расплывается" 
                и становится мало заметным на общем фоне. </p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Однако часто 
                в пределах апертуры значения полезного изображения все же изменяются 
                заметным образом. Это бывает, в частности, когда в пределы маски 
                попадают контуры. С физической точки зрения, все <i>H<sub>1</sub></i>&nbsp; 
                - <i>H<sub>4</sub></i>&nbsp; являются <i>фильтрами нижних частот&nbsp;</i>(усред­няющими 
                фильтрами), подавляющими высокочастотные гармоники и шума, и полезного 
                изображения. Это приводит не только к ослаблению шума, но и к 
                размыванию контуров на изображении. На рис. 6а показано исходное 
                зашумленное изображение, результат применения фильтра типа Н<sub>2</sub> 
                приведен на рис. 6б (маска 5х5).</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify"> 
              <table cellspacing=0 cellpadding=0 align=left>
                <tbody>
                  <tr> 
                    <td width=5 height=0></td>
                  </tr>
                  <tr> 
                    <td></td>
                    <td><img height=328 
      alt="Подпись:  &#13;&#10;&#13;&#10;                    а                                        б                                          в &#13;&#10;&#13;&#10;Рис. 6. Линейная и нелинейная фильтрация&#13;&#10;" 
      src="images/image030.gif" 
  width=616></td>
                  </tr>
                </tbody>
              </table>
              <br clear=all>
              &nbsp; 
              <p></p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify"><img 
height=1 src="images/image032.gif" width=1> Рассмотренная выше фильтрация характеризовалась 
                тем, что выходные значения фильтра <i>g</i>&nbsp;определялись 
                только через входные значения фильтра <i>f</i>&nbsp;. Такие фильтры 
                называются <i>не рекурсивными</i>. Фильтры, в которых выходные 
                значения <i>g</i>&nbsp; определяются не только через входные значения 
                <i>f</i>&nbsp;, но и через соответствующие выходные значения, 
                называются <i>рекурсивными</i>.</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: justify"> 
                При рекурсивной фильтрации можно сохранять те же значения весовых 
                множителей, что и приведенные выше, существуют рекурсивные фильтры 
                со специально подобранными множителями. Элементы входного изображения 
                в пределах окна изменятся и примут вид:</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: center" 
align=center><i><sub><img height=78 
src="images/image034.gif" 
width=274></sub></i></p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Весовые и 
                нормирующий множители рекурсивного фильтра зависят от местоположения 
                маски; рекурсивный локальный фильтр позволяет учитывать все входные 
                значения фильтруемого изображения, т.е. приближается по своему 
                действию к глобальному фильтру.</p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Для устранения 
                эффекта размывания контуров при подавлении шума следует переходить 
                к нелинейной обработке. Примером нелинейного фильтра для подавления 
                шума служит <i>медианный</i>&nbsp;фильтр. При медианной фильтрации 
                (<i>i,j</i>)-му пикселу присваивается <i>медианное</i>&nbsp;значение 
                яркости, т.е. такое значение, частота которого равна 0,5. Пусть, 
                например, используется маска 3 &acute;3, в пределы которой наряду 
                с более или менее равномерным фоном попал шумовой выброс, этот 
                выброс пришелся на центральный элемент маски: </p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: center" 
align=center><sub><img height=74 
src="images/image036.gif" 
width=134></sub></p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 35.45pt; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Строится 
                вариационный ряд. Вариационным рядом V<sub>1</sub>,..., V<sub>n</sub> 
                выборки <i>f</i><sub>1</sub>,..., <i>f</i><sub>n</sub> называют 
                упорядоченную по не убыванию последовательность элементов выборки, 
                т.е. V<sub>1</sub> = min(<i>f</i><sub>1</sub>,..., <i>f</i><sub>n</sub>), 
                V<sub>n</sub>= max (<i>f</i><sub>1</sub>,..., <i>f</i><sub>n</sub>) 
                и т.д. В нашем случае вариационный ряд имеет вид: 63, 66, 68, 
                71, <u>74</u>, 79, 83, 89, 212. Здесь медианное значение - пятое 
                по счету (подчеркнуто), так как всего чисел в ряду 9. При медианной 
                фильтрации значение 212, искаженное шумовым выбросом, заменяется 
                на 74, выброс на изображении полностью подавлен. Результат применения 
                медианного фильтра показан на рис. 6в. </p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Функция рассеяния 
                точки для медианного фильтра есть нуль. При размерах окна (2<i>k</i>+1)·(2<i>k</i>+1) 
                происходит полное подавление помех, состоящих не более, чем из 
                2(<i>k</i><sup>2</sup> + <i>k</i>) пикселов, а также тех, которые 
                пересекаются не более, с <i>k</i> строками или <i>k</i> столбцами, 
                При этом не изменяется яркость в точках фона. Разумеется, при 
                медианной фильтрации может происходить искажение объекта на изображении, 
                но только на границе или вблизи нее, если размеры объекта больше 
                размеров маски. Фильтр обладает высокой эффективностью при подавлении 
                импульсных помех, однако это качество достигается подбором размеров 
                маски, когда известны минимальные размеры объектов и максимальные 
                размеры искаженных помехой локальных областей. </p>
              <div align="left">
                <p><b>Улучшение контраста</b></p>
                <p>Слабый контраст – наиболее распространенный дефект фотографических, 
                  сканерных и телевизионных изображений, обусловленный ограниченностью 
                  диапазона воспроизводимых яркостей. Под контрастом обычно понимают 
                  раз­ность максимального и минимального значений яркости. Путем 
                  цифровой обработки контраст можно повысить, изменяя яркость 
                  каждого элемента изображения и увеличивая диапазон яркостей. 
                  Для этого разработано несколько методов. </p>
                <p>Пусть, например, уровни некоторого черно-белого изображения 
                  занимают интервал от 6 до 158 со средним значением яркости 67 
                  при возможном <i>наибольшем</i> <i>интервале значений</i> от 
                  0 до 255. На рисунке 1а приведена гистограмма&nbsp;яркостей 
                  исходного изображения, показывающая, сколько пикселов N с близким 
                  значением яркости <i>f</i> попадает в интервал от<i> f</i><sub>i</sub> 
                  до <i>f </i>+&#8710;<i>f</i><sub>i</sub>. Это изображение является 
                  малоконтрастным, превалирует темный оттенок. Возможным методом 
                  улучшения контраста может стать так называемая <i>линейная растяжка 
                  гистограммы </i>(stretch),&nbsp;когда уровням исходного изображения, 
                  лежащим в интервале [<i>f</i><sub>мин</sub>,<i> f</i><sub>макс</sub>], 
                  присваиваются новые значения с тем, чтобы охватить весь возможный 
                  интервал изменения яркости, в данном случае [0, 255]. При этом 
                  контраст существенно увеличивается (рис. 1б). Преобразование 
                  уровней яркости осуществляется по формуле:</p>
              </div>
              <p class=MsoPlainText 
style="TEXT-INDENT: 6cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify"><sub><img height=24 
src="images/image002.gif" 
width=86></sub> (1)</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">где 
                <i>f</i><sub>i</sub> - старое значение яркости <i>i</i>-го пиксела, 
                <i>g<sub>i</sub></i> - новое значение, <i>a</i>, <i>b</i> - коэффициенты. 
                Для рис. 1а <i>f</i><sub>мин</sub> = 6, <i>f</i><sub>макс </sub>= 
                158. Выберем <i>a</i> и <i>b </i>таким образом, чтобы <i>g</i><sub>мин 
                </sub>= 0, <i>g<sub>макс</sub></i> = 255. Из (1) получаем: <i>a</i> 
                = - 10,01; b = 1,67.</p>
              <table cellspacing=0 cellpadding=0 align=left>
                <tbody>
                  <tr> 
                    <td width=5 height=0></td>
                  </tr>
                  <tr> 
                    <td></td>
                    <td><img height=396 
      alt="Подпись:  &#13;&#10;&#13;&#10;а                                                                  б&#13;&#10;Рис. 1. Исходное изображение (а) и изображение после линейной растяжки гистограммы (б)&#13;&#10;" 
      src="images/image004.gif" 
  width=606></td>
                  </tr>
                </tbody>
              </table>
              <p><br clear=all>
                &nbsp; </p>
              <p>Еще более можно улучшить контраст, используя <i>нормализацию 
                гистограммы</i>. При этом на весь максимальный интервал уровней 
                яркости [0, 255] растягивается не вся гистограмма, лежащая в пределах 
                от <i>f</i><sub>мин</sub> до <i>f</i><sub>макс</sub>, а её наиболее 
                интенсивный участок (<i>f</i><sub>мин'</sub>, <i>f</i><sub>макс'</sub>), 
                из рассмотрения исключаются малоинформативные "хвосты". На рис. 
                2б исключено 5% пикселов. </p>
              <p class=MsoPlainText style="MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: center" 
align=center> 
              <table cellspacing=0 cellpadding=0 align=left>
                <tbody>
                  <tr> 
                    <td width=5 height=0></td>
                  </tr>
                  <tr> 
                    <td></td>
                    <td><img height=396 
      alt="Подпись:  &#13;&#10;&#13;&#10;                           а                                                                    б&#13;&#10;&#13;&#10;Рис. 2. Нормализация гистограммы&#13;&#10;" 
      src="images/image006.gif" 
  width=616></td>
                  </tr>
                </tbody>
              </table>
              <p><br clear=all>
                &nbsp; </p>
              <p>Целью выравнивания&nbsp;гистограммы&nbsp;(эту процедуру называют 
                также <i>линеаризацией</i> и <i>эквализацией</i> - equalization) 
                является такое преобразование, чтобы, в идеале, все уровни яркости 
                приобрели бы одинаковую частоту, а гистограмма яркостей отвечала 
                бы равномерному закону распределения (рис. 3). </p>
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: 12.3pt; TEXT-ALIGN: center" align=center> 
              <table cellspacing=0 cellpadding=0 align=left>
                <tbody>
                  <tr> 
                    <td width=5 height=0></td>
                  </tr>
                  <tr> 
                    <td></td>
                    <td><img height=194 
      alt="Подпись:  &#13;&#10;&#13;&#10;Рис.  3. Гистограмма отвечает равномерному закону распределения&#13;&#10;" 
      src="images/image008.gif" 
  width=616></td>
                  </tr>
                </tbody>
              </table>
              <br clear=all>
              &nbsp; 
              <p class=MsoPlainText 
style="TEXT-INDENT: 1cm; MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: justify">Пусть изображение 
                имеет формат: <i>N</i> пикселов по горизонтали и <i>M</i> по вертикали, 
                число уровней квантования яркости равно J. Общее число пикселов 
                равно <i>N </i>·<i>M</i>, на один уровень яркости попадает, в 
                среднем, n<sub>o</sub> = <i>N</i> ·<i>M/</i>J пикселов. Например, 
                <i>N</i> = <i>M</i> = 512, J = 256. В этом случае n<sub>o</sub> 
                = 1024. Расстояние &#8710;<i>f</i>между дискретными уровнями яркости 
                от <i>f</i><sub>i</sub>до <i>f</i><sub>i+1</sub>в гистограмме 
                исходного изображения одинаковое, но на каждый уровень выпадает 
                различное число пикселов. При эквализации гистограммы расстояние 
                &#8710;<i>g</i><sub>i</sub> между уровнями <i>g</i><sub>i</sub> 
                и <i>g</i><sub>i+1</sub> различно, но число пикселов на каждом 
                уровне, в среднем, одинаковое и равно n<sub>o</sub>. Алгоритм 
                эквализации несложен. Пусть уровнями с малой яркостью обладает 
                небольшое количество пикселов, как на рис. 3а. Например, уровень 
                яркости 0 на исходном изображении имеют 188 пикселов, уровень 
                1 - 347 </p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: center" 
align=center> <img 
height=396 
alt="Подпись:  &#13;&#10;&#13;&#10;а                                                                    б&#13;&#10;&#13;&#10;Рис. 4. Эквализация гистограммы&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;&#13;&#10;" 
src="images/image010.gif" width=626><br 
clear=all>
                &nbsp;</p>
              <p class=MsoPlainText style="MARGIN-RIGHT: -0.9pt; TEXT-ALIGN: center">пикселов, 
                уровень 2 - 544 пиксела. В сумме это 1079 пикселов, т.е. приблизительно 
                n<sub>o</sub>. Присвоим всем этим пикселам уровень 0. Пусть на 
                исходном изображении число пикселов с уровнями яркости 3 и 4 в 
                сумме приблизительно также равно n<sub>o</sub>. Этим пикселам 
                присваивается уровень 1. С другой стороны, пусть число пикселов 
                с уровнем 45 на исходном изображении составляет 3012, т.е. приблизительно 
                3n<sub>o</sub>. Всем этим пикселам присваивается некоторый одинаковый 
                уровень <i>g</i><sub>i</sub>, не обязательно равный 45, а соседние 
                два уровня остаются <i>незаполненными</i>. Рассмотренные процедуры 
                выполняются для всех уровней яркости. Результат эквализации можно 
                видеть на рис. 4б. В каждом конкретном случае выбирают ту процедуру 
                преобразования гистограмм, которая приводит к наилучшему, с точки 
                зрения пользователя, результату.</p>
              <p>&nbsp;</p>
              </blockquote>
            </td>
        </tr>
      </table></td>
    <!-- InstanceEndEditable --></tr>
  <tr valign="top"> 
    <td height="30">&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
</body>
<!-- InstanceEnd --></html>
